<app-header></app-header>

<app-modal #modal [title]="'Select the option of your preference'" [rejectButtonText]="'general.cancel'| translate"
    [acceptButtonText]="'general.accept'| translate" (confirmAction)="onAccept()">

    <div style="text-align:center">
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="isPersonalModal" value="isPersonal"
                [(ngModel)]="isSelectOption" (change)="onRadioChange($event)">
            <label class="form-check-label" for="isPersonalModal">{{ 'profile.personal' | translate }}</label>
        </div>
        <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" id="isBusinessModal" value="isBusiness"
                [(ngModel)]="isSelectOption" (change)="onRadioChange($event)">
            <label class="form-check-label" for="isBusinessModal">{{ 'profile.business' | translate }}</label>
        </div>
    </div>
</app-modal>

<div class="container-fluid">
    <div class="row">
        <div class="col-lg-3">
        </div>
        <div class="col-lg-6 p-4 col-12">
            @if(this.showOptsPro){
            <div style="text-align:center" class="mt-3">
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="isPersonalFooter"
                        value="isPersonal" [(ngModel)]="isSelectOption" (change)="onRadioChange($event)"
                        [disabled]="isDisabled">
                    <label class="form-check-label" for="isPersonalFooter">{{ 'profile.personal' | translate }}</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="inlineRadioOptions" id="isBusinessFooter"
                        value="isBusiness" [(ngModel)]="isSelectOption" (change)="onRadioChange($event)">
                    <label class="form-check-label" for="isBusinessFooter">{{ 'profile.business' | translate }}</label>
                </div>
            </div>
            }

            <div class="card container-box mt-3">
                @if (!isNext) {
                <h5 class="card-header bg-primary text-light">{{ 'profile.formPersonal' | translate }}</h5>
                }
                @else {
                <h5 class="card-header bg-primary text-light">{{ 'profile.formBusiness' | translate }}</h5>
                }
                <div class="card-body">
                    <app-floating-alert [alertMessage]="alertMessage" [backendMessage]="backendMessage" />
                    @if(!isNext) {

                    <app-pro-personal-form 
                    [parentForm]="proPersonalForm" 
                    [listCategories]="listCategories"
                    [listZipcode]="listZipcode"
                    (licensesChanged)="onLicensesChangedFromChild($event)"
                    (fileSelected)="onFileSelectedPersonal($event)"
                     [previewImgPersonal]="previewImgPersonal"   
                    >
                    </app-pro-personal-form>
                     <div *ngIf="proPersonalForm.get('categories')?.errors?.['incompleteLicenses']" class="text-danger mt-2">
  Hay categor√≠as que requieren licencia pero no se ha completado la carga del documento.
</div>


                    <div class="d-flex justify-content-end mt-3">

                        @if(isSelectOption=='isPersonal'){
                        <button type="button" class="btn btn-primary  btn-lg btn-block" (click)="onSubmit()">
                            {{ 'general.save' | translate }}
                        </button>
                        }
                        @else {
                        <button type="button" class="btn btn-primary  btn-lg btn-block" (click)="nextStep()">
                            {{ 'general.next' | translate }}
                        </button>

                        }

                        <!-- <ng-template #saveButton>
                            <button type="submit" class="btn btn-primary btn-lg btn-block">
                                {{ 'general.save' | translate }}
                            </button>
                        </ng-template> -->
                    </div>
                    }

                    @if(isNext) {
                    <app-pro-business-form [parentForm]="proBusinessForm" [previewImgBusiness]="previewImgBusiness"
                        [imageBusiness]="imageBusiness" (fileSelected)="onFileSelectedBusiness($event)">
                    </app-pro-business-form>

                    <div class="d-flex justify-content-between mt-3">
                        <button type="button" class="btn btn-outline-primary  btn-lg btn-block mt-3"
                            (click)="previousStep()">Previous</button>
                        <button type="button" class="btn btn-primary btn-lg btn-block mt-3" (click)="onSubmit()">{{'general.save' |
                            translate}}</button>
                    </div>
                    }
                </div>
            </div>
        </div>
        <div class="col-lg-3">
        </div>
    </div>
</div>